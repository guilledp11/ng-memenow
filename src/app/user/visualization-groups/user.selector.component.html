<!-- user-selector.component.html -->
<div class="user-selector-container">
    <div *ngIf="selectedUsers.length > 0" class="selected-users">
        <div *ngFor="let user of selectedUsers" class="user-card">
            <span class="user-name">{{ user.username }}</span>
            <button class="remove-btn" (click)="removeUser(user)">×</button>
        </div>
    </div>

    <input type="text" [(ngModel)]="searchQuery" (input)="onSearch()" placeholder="Buscar usuarios..." class="search-input"/>

    <div class="user-list">
        <div *ngFor="let user of users" class="user-item">
            <label class="custom-checkbox">
                <input type="checkbox" [checked]="selectedUsers.includes(user)" (change)="toggleUserSelection(user)" />
                <span class="checkmark"></span>
                {{ user.username }}
            </label>
        </div>
    </div>

    <button *ngIf="!loading && hasMoreUsers" (click)="loadMoreUsers()" class="load-more-btn">
        <span class="plus-icon">+</span> Cargar más
    </button>
    <div *ngIf="loading" class="loading">Cargando más usuarios...</div> <!-- Indicador de carga -->
</div>